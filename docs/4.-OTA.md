# OTA

Homie for ESP8266 supports OTA, if enabled in the configuration, and if a compatible OTA server is set up.

It works this way:

1. The device receives an OTA notification from the MQTT broker, as defined in the Homie convention.
2. If the version sent by the broker is different than the one set with `Homie.setFirmware()`, and if OTA is enabled in the configuration, the device will send a message to the `$ota/request` endpoint, asking the server responsible for OTA to start sending the payload.
3. The server then sends the firmware binary to `$ota/payload`, and the device will flash it.
4. Once done, the device reboots as soon as the device is resettable (with `Homie.setResettable()`).

## Creating a compatible OTA server

TODO

## Other OTA server projects

### homie-ota

* [homie-ota](https://github.com/jpmens/homie-ota) is written in Python. It provides an OTA server for Homie devices as well as a simple _inventory_ which can be useful to keep track of Homie devices. [homie-ota](https://github.com/jpmens/homie-ota) also enables you to trigger an OTA update (over MQTT, using the Homie convention) from within its inventory. New firmware can be uploaded to `homie-ota` which detects firmware name (`fwname`) and version (`fwversion`) from the uploaded binary blob, thanks to an idea and code contributed by Marvin.
